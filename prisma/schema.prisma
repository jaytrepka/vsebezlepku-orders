generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Order {
  id          String      @id @default(cuid())
  orderNumber String      @unique
  emailDate   DateTime
  rawEmail    String?
  totalPrice  String?
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  items       OrderItem[]
}

model OrderItem {
  id          String        @id @default(cuid())
  orderId     String
  productName String
  quantity    Int
  unitPrice   String?
  productUrl  String?
  labelId     String?
  order       Order         @relation(fields: [orderId], references: [id], onDelete: Cascade)
  label       ProductLabel? @relation(fields: [labelId], references: [id])
}

model ProductLabel {
  id              String      @id @default(cuid())
  productName     String      
  language        String      @default("cs") // cs = Czech, pl = Polish, sk = Slovak
  nazev           String      // Display name (e.g., PISTÁCIOVÉ DONUTY (90g))
  slozeni         String      // Ingredients with allergens marked
  nutricniHodnoty String      // Nutrition facts
  skladovani      String?     // Storage instructions (optional)
  vyrobce         String      // Manufacturer
  verified        Boolean     @default(false) // Whether the label has been verified as correct
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
  orderItems      OrderItem[]

  @@unique([productName, language])
}
